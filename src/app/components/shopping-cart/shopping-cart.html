<div class="max-w-4xl mx-auto p-6">
  <!-- Cart Header section, showing the title and item count. -->
  <div class="flex items-center justify-between mb-6 pb-4 border-b-2 border-blue-500">
    <div class="flex items-center space-x-3">
      <!-- Shopping cart icon for visual appeal. -->
      <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9m-9 0V19a2 2 0 002 2h9a2 2 0 002-2v-6"
        ></path>
      </svg>
      <h2 class="text-2xl font-bold text-gray-800">Shopping Cart</h2>
      <!-- Dynamically displays the total number of items in the cart. -->
      <span class="bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full">
        {{ itemCount$ | async }} items
      </span>
    </div>
  </div>

  <!-- Conditional rendering: checks if cartItems$ has a value and assigns it to 'cartItems'. -->
  @if ((cartItems$ | async); as cartItems) {
  <!-- Further conditional rendering: checks if the cart is not empty. -->
  @if (cartItems.length > 0) {
  <div class="bg-white rounded-lg shadow-md overflow-hidden">
    <!-- Section to display individual cart items. -->
    <div class="max-h-96 overflow-y-auto">
      <!-- Loops through each item in the cart and displays it using the app-cart-item component. -->
      @for (item of cartItems; track item.product.id) {
      <app-cart-item
        [cartItem]="item"
        (quantityChange)="onQuantityChange($event)"
        (removeItem)="onRemoveItem($event)"
      >
      </app-cart-item>
      }
    </div>

    <!-- Cart Summary section, showing total price and action buttons. -->
    <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-semibold text-gray-800">Total:</h3>
        <!-- Displays the total price of all items in the cart, formatted to two decimal places. -->
        <span class="text-2xl font-bold text-green-600">{{
          totalPrice$ | async | number : '1.2-2'
        }}</span>
      </div>

      <!-- Buttons for clearing the cart and proceeding to checkout. -->
      <div class="flex flex-col sm:flex-row gap-3 justify-end">
        <!-- Button to clear all items from the cart. -->
        <button
          (click)="onClearCart()"
          class="px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-md transition-colors duration-200 flex items-center justify-center space-x-2"
        >
          <!-- Trash icon for the clear cart button. -->
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
            ></path>
          </svg>
          <span>Clear Cart</span>
        </button>

        <!-- Button to proceed with the checkout process. -->
        <button
          class="px-8 py-2 bg-green-500 hover:bg-green-600 text-white font-medium rounded-md transition-colors duration-200 flex items-center justify-center space-x-2"
        >
          <!-- Credit card icon for the checkout button. -->
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
            ></path>
          </svg>
          <span>Checkout</span>
        </button>
      </div>
    </div>
  </div>
  } @else {
  <!-- Displayed when the cart is empty. -->
  <div class="text-center py-16 bg-white rounded-lg shadow-md">
    <!-- Empty cart icon. -->
    <svg
      class="w-24 h-24 mx-auto text-gray-300 mb-4"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="1"
        d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9m-9 0V19a2 2 0 002 2h9a2 2 0 002-2v-6"
      ></path>
    </svg>
    <p class="text-xl text-gray-500 mb-4">Your cart is empty</p>
    <p class="text-gray-400">Add some products to get started!</p>
  </div>
  } } @else {
  <!-- Displayed when cartItems$ is still loading or has no value. -->
  <div class="text-center py-8">Loading...</div>
  }
</div>
